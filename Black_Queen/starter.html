<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Black Queen</title>
  
  <link rel="stylesheet" href="./css/navbar.css">
  <link rel="stylesheet" href="./css/cards_table.css">
  <link rel="stylesheet" href="./css/cards.css">
  <link rel="stylesheet" href="./css/intro.css">
  <link rel="stylesheet" href="./css/partner_modal.css">
  <link rel="stylesheet" href="./css/gameplay_animations.css">
  <link rel="stylesheet" href="./css/score_table_modal.css">
  <script src="js/intro.js"></script>
</head>
<body>
  <!-- White overlay and animated logo -->
  <div id="white-overlay"></div>
  <div id="logo-anim-overlay">
    <img id="logo-anim-img" src="./img/black_queen_backside_default.webp" alt="Black Queen Logo" />
  </div>
  <!-- Main website content, hidden initially -->
  <div id="main-content" style="display: none;"> 
    <!-- NAVBAR -->
    <nav class="navbar-bq">
      <!-- Left: Logo -->
      <div class="navbar-logo">
        <img src="./img/black_queen_backside_default.webp" alt="Black Queen Logo" class="bq-logo" />
      </div>

      <!-- Center: Title -->
      <div class="navbar-title-links-wrapper">
        <div class="navbar-title">
          <span class="title-text">Black Queen</span>
          <h1 class="subtitle-text">A strategic 4-player card game</h1>
        </div>

        <!-- Right: Links -->
        <div class="navbar-links-bq">
          <a href="privacy.html">Privacy Policy</a>
          <a href="about.html">About Us</a>
        </div>
      </div>
    </nav>

    <!-- Main Game Play Area - THIS IS THE FLEX CONTAINER FOR TABLE AND INFO SIDEBAR -->
    <div id="play-area" class="play-area-container">
        <!-- The main table -->
        <div class="playing-table-container">
            <!-- North Player Name Area -->
            <div class="table-item north-name">
                <span class="player-name">North</span>
                <span id="north-score" class="player-score">Score: 0</span>
                <div class="player-bid-controls north-controls">
                    <button id="north-bid-btn" class="bid-button">Bid</button>
                    <button id="north-pass-btn" class="pass-button">Pass</button>
                </div>
            </div>
            <!-- North Player Cards Hand Area -->
            <div class="table-item north-cards"><div class="hand"></div></div>

            <!-- East Player Name Area -->
            <div class="table-item east-name">
                <span class="player-name">East</span>
                <div class="player-bid-controls east-controls">
                    <button id="east-bid-btn" class="bid-button">Bid</button>
                    <button id="east-pass-btn" class="pass-button">Pass</button>
                </div>
                <span id="east-score" class="player-score">Score: 0</span>
            </div>
            <!-- East Player Cards Hand Area -->
            <div class="table-item east-cards"><div class="hand"></div></div>

            <!-- West Player Cards Hand Area -->
            <div class="table-item west-cards"><div class="hand"></div></div>

            <!-- Center Playing Area -->
            <div class="table-item center-area">
                <!-- Bidding Interface (central display) -->
                <div id="bidding-interface" class="bidding-interface">
                    <!-- This div is to be displayed for showing bidding details, trump selection & partner selection -->
                    <h2 id="bidding-status" class="bidding-status">Bidding Starts!</h2>
                    <p id="current-player-turn" class="current-player-turn"></p>
                    <div class="highest-bid-info">
                        <p class="highest-bid-label">Current Bid:</p>
                        <span id="highest-bid-display" class="highest-bid-display">170</span>
                        <span id="highest-bidder-name" class="highest-bidder-name"></span>
                    </div>
                </div>
                <p id="message-box" class="message-box"></p>
                <!-- NEW: Partner Revealed Message Box (initially hidden) -->
                <div id="partner-reveal-message" class="message-box partner-reveal-message hidden">
                    ðŸŽ‰ Partner Revealed! <span id="partner-reveal-name"></span> ðŸŽ‰
                </div>
                <!-- This div is to be displayed once the partner selection is done to display only played cards -->
                <div id="center-played-cards">
                </div>
            </div>

            <!-- West Player Name Area -->
            <div class="table-item west-name">
                <span class="player-name">West</span>
                <div class="player-bid-controls west-controls">
                    <button id="west-bid-btn" class="bid-button">Bid</button>
                    <button id="west-pass-btn" class="pass-button">Pass</button>
                </div>
                <span id="west-score" class="player-score">Score: 0</span>
            </div>

            <!-- South Player Cards Hand Area -->
            <div class="table-item south-cards"><div class="hand"></div></div>
            <!-- South Player Name Area -->
            <div class="table-item south-name">
                <span class="player-name">You (South)</span>
                <span id="south-score" class="player-score">Score: 0</span>
                <div class="player-bid-controls south-controls">
                    <button id="south-bid-btn" class="bid-button">Bid</button>
                    <button id="south-pass-btn" class="pass-button">Pass</button>
                </div>
            </div>
        </div>

        <!-- NEW: Desktop Game Info Sidebar - THIS MUST BE A SIBLING TO .playing-table-container -->
        <div id="game-info-desktop" class="game-info-sidebar">
            <h3>Current Round Info</h3>
            <p>Bid Winner: <span id="desktop-bid-winner">N/A</span></p>
            <p>Final Bid: <span id="desktop-final-bid">N/A</span></p>
            <p>Partner Card: <span id="desktop-partner-card">N/A</span></p>
            <p>Trump Suit: <span id="desktop-trump-suit">N/A</span></p>
            <p>Bid-Winning Team: <span id="desktop-bid-winner-team">N/A</span></p>
            <p>Opponents: <span id="desktop-opponent-team">N/A</span></p>

        </div>
    </div>
    <!-- END of .play-area-container -->

    <!-- NEW: Mobile Game Info Display - Remains outside the main play area container -->
    <div id="game-info-mobile" class="game-info-mobile-display">
        <h3>Current Round Info</h3>
        <p>Winner: <span id="mobile-bid-winner">N/A</span> | Bid: <span id="mobile-final-bid">N/A</span></p>
        <p>Partner: <span id="mobile-partner-card">N/A</span></p>
        <p>Trump Suit: <span id="mobile-trump-suit">N/A</span></p>
        <p>Bid-Winning Team: <span id="mobile-bid-winner-team">N/A</span></p>
        <p>Opponents: <span id="mobile-opponent-team">N/A</span></p>
    </div>

    <!-- CONTROLS -->
    <div class="controls">
      <button id="shuffle-deck-btn">Shuffle</button>
      <button id="deal-cards-btn">Deal & Start Game</button>
    </div>

    <!-- Custom Bid Dropdown Modal -->
    <div id="bid-modal" class="modal">
      <div class="modal-content">
        <h3>Select Your Bid</h3>
        <select id="bid-dropdown"></select>
        <div class="modal-buttons"> <!-- Added this div for button grouping -->
          <button id="confirm-bid-btn">Confirm Bid</button>
          <button id="cancel-bid-btn">Cancel</button>
        </div>
      </div>
    </div>

    <!-- Custom Pass Confirmation Modal -->
    <div id="pass-confirm-modal" class="modal">
      <div class="modal-content">
        <h3>Confirm Pass</h3>
        <p>Are you sure you want to pass?</p>
        <div class="modal-buttons"> <!-- Added this div for button grouping -->
          <button id="confirm-pass-btn">Yes, Pass</button>
          <button id="cancel-pass-btn">No, Cancel</button>
        </div>
      </div>
    </div>

    <div id="trump-modal" class="modal">
      <div class="modal-content">
          <h3>Choose a Trump Suit</h3>
          <p>You won the bid! Select the trump suit for this round.</p>
          <div id="suit-selection-container" class="suit-selection-container">
              <div class="suit-option" data-suit="clubs">
                  <img src="./img/Clubs.webp" alt="Clubs">
              </div>
              <div class="suit-option" data-suit="diamonds">
                  <img src="./img/Diamonds.webp" alt="Diamonds">
              </div>
              <div class="suit-option" data-suit="hearts">
                  <img src="./img/Hearts.webp" alt="Hearts">
              </div>
              <div class="suit-option" data-suit="spades">
                  <img src="./img/Spades.webp" alt="Spades">
              </div>
          </div>
          <button id="confirm-trump-btn" class="bid-button" disabled>Confirm Trump Suit</button>
        </div>
    </div>

    <div id="partner-modal" class="modal">
      <div class="modal-content">
          <!-- Step 1: Suit Selection -->
          <div id="partner-step1" class="partner-step">
              <h3>Choose Partner Card - Step 1</h3>
              <p>Select the suit of the card held by your desired partner.</p>
              <div id="partner-suit-selection" class="suit-selection-container">
                  <div class="suit-option" data-suit="clubs">
                      <img src="./img/Clubs.webp" alt="Clubs">
                  </div>
                  <div class="suit-option" data-suit="diamonds">
                      <img src="./img/Diamonds.webp" alt="Diamonds">
                  </div>
                  <div class="suit-option" data-suit="hearts">
                      <img src="./img/Hearts.webp" alt="Hearts">
                  </div>
                  <div class="suit-option" data-suit="spades">
                      <img src="./img/Spades.webp" alt="Spades">
                  </div>
              </div>
              <button id="next-to-rank-btn" class="bid-button" disabled>Next: Select Rank</button>
          </div>

          <!-- Step 2: Rank Selection -->
          <div id="partner-step2" class="partner-step" style="display: none;">
              <h3>Choose Partner Card - Step 2</h3>
              <p id="selected-suit-text">Select the rank of the <span id="suit-name"></span> card:</p>
              <div id="partner-rank-selection" class="rank-selection-container">
                  <!-- Rank cards will be populated here -->
              </div>
              <div class="modal-buttons">
                  <button id="back-to-suit-btn" class="pass-button">Back</button>
                  <button id="confirm-partner-btn" class="bid-button" disabled>Confirm Partner Card</button>
              </div>
          </div>
          <!-- Step 3: Solo Confirmation (New) -->
          <div id="partner-step3" class="partner-step" style="display: none;">
              <h3>Going Solo?</h3>
              <p id="solo-warning-text">You have selected a card in your own hand as the partner card. This means you will play alone against the other three players to complete your bid. Are you sure you want to go solo?</p>
              <div class="modal-buttons">
                  <button id="solo-confirm-btn" class="bid-button">Yes, Go Solo!</button>
                  <button id="solo-cancel-btn" class="pass-button">No, Pick New Partner</button>
              </div>
          </div>
      </div>
    </div>

    <!-- NEW: Score Table Modal -->
    <div id="score-table-modal" class="modal">
        <div class="modal-content">
            <h3 id="score-table-title">Game Scores</h3>
            <table id="round-scores-table">
                <thead>
                    <tr id="score-table-header-row">
                        <th>Round No.</th>
                        <!-- Player headers will be populated here by JavaScript -->
                    </tr>
                </thead>
                <tbody id="score-table-body">
                    <!-- Round data rows will be populated here by JavaScript -->
                </tbody>
            </table>
            <div class="modal-buttons">
                <button id="next-round-btn" class="bid-button">Next Round</button>
                <button id="restart-game-btn" class="pass-button">Restart Game</button>
            </div>
        </div>
    </div>

    <script src="js/game_logic.js"></script> <!-- game_logic.js must be loaded FIRST -->
    <script src="js/script.js"></script>     <!-- script.js must be loaded SECOND -->
    <script src="js/partner_selection.js"></script> <!-- partner_selection.js must be loaded Next -->
    <script src="js/game_play.js"></script> <!-- game_play.js must be loaded next -->
    <script src="js/card_play_animations.js"></script> <!-- card_play_animations.js must be loaded Next -->
    <script src="js/trick_logics.js"></script> <!-- trick_logics.js must be loaded last -->
  </div>
</body>
</html>
