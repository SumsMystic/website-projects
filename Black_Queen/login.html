<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Black Queen - Login</title>
    <link rel="stylesheet" href="./css/login.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="login-container">
        <h1 class="login-title">Welcome to Black Queen</h1>
        <p class="login-subtitle">Log in to continue</p>

        <div class="social-login">
            <button class="social-btn facebook-btn">Login with Facebook</button>
            <button class="social-btn google-btn">Login with Google</button>
        </div>

        <div class="divider">
            <span>OR</span>
        </div>

        <div class="email-login">
            <!-- Default value for non-admin user for easy testing -->
            <input type="email" id="email-input" placeholder="Email" class="login-input" value="testuser@blackqueen.com">
            <input type="password" id="password-input" placeholder="Password" class="login-input" value="test123">
            <button id="email-login-btn" class="login-btn">Login with Email</button>
        </div>

        <p class="signup-text">Don't have an account? <a href="#" class="signup-link">Sign Up</a></p>
    </div>

    <script>
        let defaultTotalRounds = 10;
        let defaultCardsPerPlayer = 13; // 52 cards / 4 players

        document.getElementById('email-login-btn').addEventListener('click', () => {
            const email = document.getElementById('email-input').value;
            const password = document.getElementById('password-input').value;

            // Admin credentials
            const ADMIN_EMAIL = 'admin@blackqueen.com';
            const ADMIN_PASSWORD = 'BlackQueen%456';

            // Normal user credentials
            const NORMAL_USER_EMAIL = 'testuser@blackqueen.com';
            const NORMAL_USER_PASSWORD = 'test123';

            let loginSuccess = false;

            if (email === ADMIN_EMAIL && password === ADMIN_PASSWORD) {
                sessionStorage.setItem('totalRounds', '3');
                sessionStorage.setItem('cardsPerPlayer', '2'); // Debug mode for admin
                sessionStorage.setItem('isAdminLogin', 'true');
                loginSuccess = true;
                alert('Admin login successful! Redirecting to game setup.');
            } else if (email === NORMAL_USER_EMAIL && password === NORMAL_USER_PASSWORD) {
                sessionStorage.setItem('totalRounds', defaultTotalRounds.toString());
                sessionStorage.setItem('cardsPerPlayer', defaultCardsPerPlayer.toString());
                sessionStorage.removeItem('isAdminLogin'); // Ensure admin flag is not set
                loginSuccess = true;
                alert('Login successful! Starting game with default settings.');
            } else {
                alert('Invalid email or password.');
            }

            if (loginSuccess) {
                sessionStorage.setItem('isLoggedIn', 'true'); // <-- ADDED: Set logged in flag
                window.location.href = 'mode_selection.html'; // Always redirect to mode selection
            }
        });

        // Add dummy event listeners for social buttons (they won't do anything for now)
        document.querySelectorAll('.social-btn').forEach(button => {
            button.addEventListener('click', () => {
                alert('Social login not yet implemented.');
            });
        });
    </script>
</body>
</html>
